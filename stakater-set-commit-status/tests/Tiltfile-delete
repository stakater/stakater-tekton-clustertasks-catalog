include('Tiltfile')

def delete_operator():
    print('Deleting pipelines operator')
    local('helm uninstall rh-openshift-pipelines-operator')

def delete_instance():
    print('Deleting pipelines operator')
    local('helm uninstall rh-openshift-pipelines-instance')

def delete_clustertask():
    print('Deleting ClusterTask')
    local('helm uninstall clustertask')

delete_clustertask()
delete_instance()
delete_operator()

# delete_clustertask() if local('kubectl get secret -n default | grep "clustertask" | wc -l') > '0' else None
    

# delete_instance() if local('kubectl get secret -n default | grep "rh-openshift-pipelines-instance" | wc -l') > '0' else None
    

# delete_operator(),delete_crds() if local('kubectl get secret -n default | grep "rh-openshift-pipelines-operator" | wc -l') > '0' else None
    